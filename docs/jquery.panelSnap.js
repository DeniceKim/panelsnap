/**
 * panelSnap.js v0.0.0-development
 * Copyright (c) 2013-present, Guido Bouman
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){return t!==document.body?t:"scrollingElement"in document?document.scrollingElement:navigator.userAgent.indexOf("WebKit")>-1?document.body:document.documentElement}var e,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(e,i,o){var s={isMouseDown:!1,isSnapping:!1,enabled:!0,scrollOffset:0,init:function(n,i){if(this.container=i,this.$container=e(i),this.$eventContainer=this.$container,this.$snapContainer=e(t(this.$container[0])),this.$container.is("body")&&(this.$eventContainer=e(o)),this.options=e.extend(!0,{},e.fn.panelSnap.options,n),this.bind(),!1!==this.options.$menu&&e(".active",this.options.$menu).length>0)e(".active",this.options.$menu).click();else{var s=this.getPanel(":first");this.activatePanel(s)}return this},bind:function(){this.bindProxied(this.$eventContainer,"scrollstop",this.scrollStop),this.bindProxied(this.$eventContainer,"mousewheel",this.mouseWheel),this.bindProxied(this.$eventContainer,"mousedown",this.mouseDown),this.bindProxied(this.$eventContainer,"mouseup",this.mouseUp),this.bindProxied(e(i),"resizestop",this.resize),this.options.$menu&&this.bindProxied(this.options.$menu,"click",this.captureMenuClick,this.options.menuSelector),(this.options.navigation.keys.nextKey||this.options.navigation.keys.prevKey)&&this.bindProxied(e(i),"keydown",this.keyDown),this.options.navigation.buttons.$nextButton&&this.bindProxied(this.options.navigation.buttons.$nextButton,"click",this.captureNextClick),this.options.navigation.buttons.$prevButton&&this.bindProxied(this.options.navigation.buttons.$prevButton,"click",this.capturePrevClick)},bindProxied:function(t,n,i,o){var s=this;n+=s.options.namespace,o="string"==typeof o?o:null,t.on(n,o,e.proxy(function(t){return i.call(s,t)},s))},destroy:function(){this.$eventContainer.off(this.options.namespace),e(i).off(this.options.namespace),!1!==this.options.$menu&&e(this.options.menuSelector,this.options.$menu).off(this.options.namespace),this.$container.removeData("plugin_panelSnap")},scrollStop:function(t){var e=void 0;if(t.stopPropagation(),!this.isMouseDown&&!this.isSnapping){var n=this.getPanelsInViewport();if(!this.enabled||n.length<2)(e=n.eq(0)).is(this.getPanel(".active"))||this.activatePanel(e);else{var i=this.$snapContainer.scrollTop(),o=i-this.scrollOffset,s=Math.abs(o)>this.options.directionThreshold,a=void 0;if(o>0)a=s?1:0;else{if(!(o<0))return;a=s?0:1}e=n.eq(a);var r=this.$container[0].scrollHeight-this.scrollInterval;i<=0||i>=r?(this.activatePanel(e),this.scrollOffset=i<=0?0:r):this.snapToPanel(e)}}},getPanelsInViewport:function(){var t=this,n={top:t.$snapContainer.scrollTop()};return n.bottom=n.top+t.$snapContainer.height(),t.getPanel().filter(function(i,o){var s=e(o),a=void 0;return t.$container.is("body")?a=s.offset():(a=s.position()).top+=t.$snapContainer.scrollTop(),a.bottom=a.top+s.outerHeight(),!(n.bottom<a.top||n.top>a.bottom)})},mouseWheel:function(){this.isSnapping&&(this.scrollOffset=this.$snapContainer.scrollTop(),this.$snapContainer.stop(!0),this.isSnapping=!1)},mouseDown:function(){this.isMouseDown=!0},mouseUp:function(t){this.isMouseDown=!1,this.scrollOffset!==this.$snapContainer.scrollTop()&&this.scrollStop(t)},keyDown:function(t){var e=this.options.navigation;if(this.enabled){switch(t.which){case e.keys.prevKey:case e.keys.nextKey:t.preventDefault()}if(!this.isSnapping)switch(t.which){case e.keys.prevKey:this.snapTo("prev",e.wrapAround);break;case e.keys.nextKey:this.snapTo("next",e.wrapAround)}}},captureNextClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("next",this.options.navigation.wrapAround)},capturePrevClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("prev",this.options.navigation.wrapAround)},resize:function(){if(this.enabled){var t=this.getPanel(".active");this.snapToPanel(t)}},captureMenuClick:function(t){var n=e(t.currentTarget).data("panel"),i=this.getPanel('[data-panel="'+n+'"]');return this.snapToPanel(i),!1},snapToPanel:function(t){var e=this;if(t.jquery){e.isSnapping=!0,e.options.onSnapStart.call(e,t),e.$container.trigger("panelsnap:start",[t]);var n=0;n=e.$container.is("body")?t.offset().top:e.$snapContainer.scrollTop()+t.position().top,n-=e.options.offset;var i=e.scrollOffset>n,o=t.outerHeight()>e.$snapContainer.outerHeight();i&&o&&(n+=t.outerHeight(),n-=e.$snapContainer.outerHeight()),e.$snapContainer.stop(!0).delay(e.options.delay).animate({scrollTop:n},e.options.slideSpeed,e.options.easing,function(){e.scrollOffset=e.$snapContainer.scrollTop(),e.isSnapping=!1,e.options.onSnapFinish.call(e,t),e.$container.trigger("panelsnap:finish",[t]),e.activatePanel(t)})}},activatePanel:function(t){if(this.getPanel(".active").removeClass("active"),t.addClass("active"),!1!==this.options.$menu){var n=this.options.menuSelector+".active";e(n,this.options.$menu).removeClass("active");var i='[data-panel="'+t.data("panel")+'"]',o=this.options.menuSelector+i;e(o,this.options.$menu).addClass("active")}var s=this.options.navigation;if(!s.wrapAround){var a=this.getPanel(),r=a.index(this.getPanel(".active"));!1!==s.buttons.$nextButton&&((t=a.eq(r+1)).length<1?(e(s.buttons.$nextButton).attr("aria-disabled","true"),e(s.buttons.$nextButton).addClass("disabled")):(e(s.buttons.$nextButton).attr("aria-disabled","false"),e(s.buttons.$nextButton).removeClass("disabled"))),!1!==s.buttons.$prevButton&&(r<1?(e(s.buttons.$prevButton).attr("aria-disabled","true"),e(s.buttons.$prevButton).addClass("disabled")):(e(s.buttons.$prevButton).attr("aria-disabled","false"),e(s.buttons.$prevButton).removeClass("disabled")))}this.options.onActivate.call(this,t),this.$container.trigger("panelsnap:activate",[t])},getPanel:function(t){return void 0===t&&(t=""),e(this.options.panelSelector+t,this.$container)},snapTo:function(t,e){"boolean"!=typeof e&&(e=!0);var n=this.getPanel(),i=n.index(this.getPanel(".active")),o=void 0;switch(t){case"prev":o=n.eq(i-1),i<1&&!e&&(o=[]);break;case"next":(o=n.eq(i+1)).length<1&&e&&(o=n.filter(":first"));break;case"first":o=n.filter(":first");break;case"last":o=n.filter(":last")}o.length>0&&this.snapToPanel(o)},enable:function(){this.scrollOffset=this.$snapContainer.scrollTop(),this.enabled=!0},disable:function(){this.enabled=!1},toggle:function(){this.enabled?this.disable():this.enable()}};e.fn.panelSnap=function(t){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return this.each(function(){var i=e.data(this,"plugin_panelSnap");if("object"!==(void 0===t?"undefined":n(t))&&"init"!==t&&t)if(i)if(i[t]){var a,r=t;t=o.slice(1),(a=i)[r].apply(a,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}else e.error("Method "+t+" does not exist on jQuery.panelSnap.");else e.error("Plugin is not initialized for this object yet.");else i?e.error("Plugin is already initialized for this object."):("init"===t&&(t=o[1]||{}),i=Object.create(s).init(t,this),e.data(this,"plugin_panelSnap",i))})},e.fn.panelSnap.options={$menu:!1,menuSelector:"a",panelSelector:"> section",namespace:".panelSnap",onSnapStart:function(){},onSnapFinish:function(){},onActivate:function(){},directionThreshold:50,slideSpeed:200,delay:0,easing:"linear",offset:0,navigation:{keys:{nextKey:!1,prevKey:!1},buttons:{$nextButton:!1,$prevButton:!1},wrapAround:!1}}}(jQuery,window,document),(e=jQuery).event.special.scrollstart={enabled:!0,setup:function(){var t=e(this),n=void 0,i=void 0;function o(e,n){e.type=n?"scrollstart":"scrollstop",t.trigger(e)}t.data("scrollwatch",!0),t.on("touchstart",function(){i=!0}),t.on("touchleave touchcancel touchend",function(){i=!1,setTimeout(function(){clearTimeout(n)},50)}),t.on("touchmove scroll",function(t){i||e.event.special.scrollstart.enabled&&(e.event.special.scrollstart.scrolling||(e.event.special.scrollstart.scrolling=!0,o(t,!0)),clearTimeout(n),n=setTimeout(function(){e.event.special.scrollstart.scrolling=!1,o(t,!1)},50))})}},e.event.special.scrollstop={setup:function(){e(this).data("scrollwatch")||e(this).on("scrollstart",function(){})}},function(t){t.event.special.resizestart={enabled:!0,setup:function(){var e=t(this),n=void 0;function i(t,n){t.type=n?"resizestart":"resizestop",e.trigger(t)}e.data("resizewatch",!0),e.on("resize",function(e){t.event.special.resizestart.enabled&&(t.event.special.resizestart.resizing||(t.event.special.resizestart.resizing=!0,i(e,!0)),clearTimeout(n),n=setTimeout(function(){t.event.special.resizestart.resizing=!1,i(e,!1)},200))})}},t.event.special.resizestop={setup:function(){t(this).data("resizewatch")||t(this).on("resizestart",function(){})}}}(jQuery),function(t){var e=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=e.length;n;)t.event.fixHooks[e[--n]]=t.event.mouseHooks;function i(e){var n=e||window.event,i=[].slice.call(arguments,1),o=0,s=0,a=0;return(e=t.event.fix(n)).type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),a=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,s=-1*o),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(e,o,s,a),(t.event.dispatch||t.event.handle).apply(this,i)}t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=e.length;t;)this.addEventListener(e[--t],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var t=e.length;t;)this.removeEventListener(e[--t],i,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery)});
