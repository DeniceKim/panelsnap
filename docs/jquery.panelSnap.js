/**
 * panelSnap.js v0.0.0-development
 * Copyright (c) 2013-present, Guido Bouman
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t){return t!==document.body?t:"scrollingElement"in document?document.scrollingElement:navigator.userAgent.indexOf("WebKit")>-1?document.body:document.documentElement}var i;"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(i,o,s){var a="plugin_".concat("panelSnap"),r={isMouseDown:!1,isSnapping:!1,enabled:!0,scrollOffset:0,init:function(t,e){if(this.container=e,this.$container=i(e),this.$eventContainer=this.$container,this.$snapContainer=i(n(this.$container[0])),this.$container.is("body")&&(this.$eventContainer=i(s)),this.options=i.extend(!0,{},i.fn.panelSnap.options,t),this.bind(),!1!==this.options.$menu&&i(".active",this.options.$menu).length>0)i(".active",this.options.$menu).click();else{var o=this.getPanel(":first");this.activatePanel(o)}return this},bind:function(){this.bindProxied(this.$eventContainer,"scrollstop",this.scrollStop),this.bindProxied(this.$eventContainer,"mousewheel",this.mouseWheel),this.bindProxied(this.$eventContainer,"mousedown",this.mouseDown),this.bindProxied(this.$eventContainer,"mouseup",this.mouseUp),this.bindProxied(i(o),"resizestop",this.resize),this.options.$menu&&this.bindProxied(this.options.$menu,"click",this.captureMenuClick,this.options.menuSelector),(this.options.navigation.keys.nextKey||this.options.navigation.keys.prevKey)&&this.bindProxied(i(o),"keydown",this.keyDown),this.options.navigation.buttons.$nextButton&&this.bindProxied(this.options.navigation.buttons.$nextButton,"click",this.captureNextClick),this.options.navigation.buttons.$prevButton&&this.bindProxied(this.options.navigation.buttons.$prevButton,"click",this.capturePrevClick)},bindProxied:function(t,e,n,o){var s=this;e+=s.options.namespace,o="string"==typeof o?o:null,t.on(e,o,i.proxy(function(t){return n.call(s,t)},s))},destroy:function(){this.$eventContainer.off(this.options.namespace),i(o).off(this.options.namespace),!1!==this.options.$menu&&i(this.options.menuSelector,this.options.$menu).off(this.options.namespace),this.$container.removeData(a)},scrollStop:function(t){var e;if(t.stopPropagation(),!this.isMouseDown&&!this.isSnapping){var n=this.getPanelsInViewport();if(!this.enabled||n.length<2)(e=n.eq(0)).is(this.getPanel(".active"))||this.activatePanel(e);else{var i,o=this.$snapContainer.scrollTop(),s=o-this.scrollOffset,a=Math.abs(s)>this.options.directionThreshold;if(s>0)i=a?1:0;else{if(!(s<0))return;i=a?0:1}e=n.eq(i);var r=this.$container[0].scrollHeight-this.scrollInterval;o<=0||o>=r?(this.activatePanel(e),this.scrollOffset=o<=0?0:r):this.snapToPanel(e)}}},getPanelsInViewport:function(){var t=this,e={top:t.$snapContainer.scrollTop()};return e.bottom=e.top+t.$snapContainer.height(),t.getPanel().filter(function(n,o){var s,a=i(o);return t.$container.is("body")?s=a.offset():(s=a.position()).top+=t.$snapContainer.scrollTop(),s.bottom=s.top+a.outerHeight(),!(e.bottom<s.top||e.top>s.bottom)})},mouseWheel:function(){this.isSnapping&&(this.scrollOffset=this.$snapContainer.scrollTop(),this.$snapContainer.stop(!0),this.isSnapping=!1)},mouseDown:function(){this.isMouseDown=!0},mouseUp:function(t){this.isMouseDown=!1,this.scrollOffset!==this.$snapContainer.scrollTop()&&this.scrollStop(t)},keyDown:function(t){var e=this.options.navigation;if(this.enabled){switch(t.which){case e.keys.prevKey:case e.keys.nextKey:t.preventDefault()}if(!this.isSnapping)switch(t.which){case e.keys.prevKey:this.snapTo("prev",e.wrapAround);break;case e.keys.nextKey:this.snapTo("next",e.wrapAround)}}},captureNextClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("next",this.options.navigation.wrapAround)},capturePrevClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("prev",this.options.navigation.wrapAround)},resize:function(){if(this.enabled){var t=this.getPanel(".active");this.snapToPanel(t)}},captureMenuClick:function(t){var e=i(t.currentTarget).data("panel"),n=this.getPanel('[data-panel="'.concat(e,'"]'));return this.snapToPanel(n),!1},snapToPanel:function(t){var e=this;if(t.jquery){e.isSnapping=!0,e.options.onSnapStart.call(e,t),e.$container.trigger("panelsnap:start",[t]);var n=0;n=e.$container.is("body")?t.offset().top:e.$snapContainer.scrollTop()+t.position().top,n-=e.options.offset;var i=e.scrollOffset>n,o=t.outerHeight()>e.$snapContainer.outerHeight();i&&o&&(n+=t.outerHeight(),n-=e.$snapContainer.outerHeight()),e.$snapContainer.stop(!0).delay(e.options.delay).animate({scrollTop:n},e.options.slideSpeed,e.options.easing,function(){e.scrollOffset=e.$snapContainer.scrollTop(),e.isSnapping=!1,e.options.onSnapFinish.call(e,t),e.$container.trigger("panelsnap:finish",[t]),e.activatePanel(t)})}},activatePanel:function(t){if(this.getPanel(".active").removeClass("active"),t.addClass("active"),!1!==this.options.$menu){var e="".concat(this.options.menuSelector,".active");i(e,this.options.$menu).removeClass("active");var n='[data-panel="'.concat(t.data("panel"),'"]'),o=this.options.menuSelector+n;i(o,this.options.$menu).addClass("active")}var s=this.options.navigation;if(!s.wrapAround){var a=this.getPanel(),r=a.index(this.getPanel(".active"));!1!==s.buttons.$nextButton&&((t=a.eq(r+1)).length<1?(i(s.buttons.$nextButton).attr("aria-disabled","true"),i(s.buttons.$nextButton).addClass("disabled")):(i(s.buttons.$nextButton).attr("aria-disabled","false"),i(s.buttons.$nextButton).removeClass("disabled"))),!1!==s.buttons.$prevButton&&(r<1?(i(s.buttons.$prevButton).attr("aria-disabled","true"),i(s.buttons.$prevButton).addClass("disabled")):(i(s.buttons.$prevButton).attr("aria-disabled","false"),i(s.buttons.$prevButton).removeClass("disabled")))}this.options.onActivate.call(this,t),this.$container.trigger("panelsnap:activate",[t])},getPanel:function(t){return void 0===t&&(t=""),i(this.options.panelSelector+t,this.$container)},snapTo:function(t,e){"boolean"!=typeof e&&(e=!0);var n,i=this.getPanel(),o=i.index(this.getPanel(".active"));switch(t){case"prev":n=i.eq(o-1),o<1&&!e&&(n=[]);break;case"next":(n=i.eq(o+1)).length<1&&e&&(n=i.filter(":first"));break;case"first":n=i.filter(":first");break;case"last":n=i.filter(":last")}n.length>0&&this.snapToPanel(n)},enable:function(){this.scrollOffset=this.$snapContainer.scrollTop(),this.enabled=!0},disable:function(){this.enabled=!1},toggle:function(){this.enabled?this.disable():this.enable()}};i.fn.panelSnap=function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return this.each(function(){var o=i.data(this,a);if("object"!==t(n)&&"init"!==n&&n)if(o)if(o[n]){var l,c=n;n=s.slice(1),(l=o)[c].apply(l,e(n))}else i.error("Method ".concat(n," does not exist on jQuery.panelSnap."));else i.error("Plugin is not initialized for this object yet.");else o?i.error("Plugin is already initialized for this object."):("init"===n&&(n=s[1]||{}),o=Object.create(r).init(n,this),i.data(this,a,o))})},i.fn.panelSnap.options={$menu:!1,menuSelector:"a",panelSelector:"> section",namespace:".panelSnap",onSnapStart:function(){},onSnapFinish:function(){},onActivate:function(){},directionThreshold:50,slideSpeed:200,delay:0,easing:"linear",offset:0,navigation:{keys:{nextKey:!1,prevKey:!1},buttons:{$nextButton:!1,$prevButton:!1},wrapAround:!1}}}(jQuery,window,document),(i=jQuery).event.special.scrollstart={enabled:!0,setup:function(){var t,e,n=i(this);function o(t,e){t.type=e?"scrollstart":"scrollstop",n.trigger(t)}n.data("scrollwatch",!0),n.on("touchstart",function(){e=!0}),n.on("touchleave touchcancel touchend",function(){e=!1,setTimeout(function(){clearTimeout(t)},50)}),n.on("touchmove scroll",function(n){e||i.event.special.scrollstart.enabled&&(i.event.special.scrollstart.scrolling||(i.event.special.scrollstart.scrolling=!0,o(n,!0)),clearTimeout(t),t=setTimeout(function(){i.event.special.scrollstart.scrolling=!1,o(n,!1)},50))})}},i.event.special.scrollstop={setup:function(){i(this).data("scrollwatch")||i(this).on("scrollstart",function(){})}},function(t){t.event.special.resizestart={enabled:!0,setup:function(){var e,n=t(this);function i(t,e){t.type=e?"resizestart":"resizestop",n.trigger(t)}n.data("resizewatch",!0),n.on("resize",function(n){t.event.special.resizestart.enabled&&(t.event.special.resizestart.resizing||(t.event.special.resizestart.resizing=!0,i(n,!0)),clearTimeout(e),e=setTimeout(function(){t.event.special.resizestart.resizing=!1,i(n,!1)},200))})}},t.event.special.resizestop={setup:function(){t(this).data("resizewatch")||t(this).on("resizestart",function(){})}}}(jQuery),function(t){var e=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=e.length;n;)t.event.fixHooks[e[--n]]=t.event.mouseHooks;function i(e){var n=e||window.event,i=[].slice.call(arguments,1),o=0,s=0,a=0;return(e=t.event.fix(n)).type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),a=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,s=-1*o),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(e,o,s,a),(t.event.dispatch||t.event.handle).apply(this,i)}t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=e.length;t;)this.addEventListener(e[--t],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var t=e.length;t;)this.removeEventListener(e[--t],i,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery)});
