/**
 * panelSnap.js v0.0.0-development
 * Copyright (c) 2013-present, Guido Bouman
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,n){var i={isMouseDown:!1,isSnapping:!1,enabled:!0,scrollOffset:0,init:function(e,i){if(this.container=i,this.$container=t(i),this.$eventContainer=this.$container,this.$snapContainer=this.$container,this.$container.is("body")){this.$eventContainer=t(n),this.$snapContainer=t(n.scrollingElement||n.documentElement);var o=navigator.userAgent;-1!==o.indexOf("WebKit")&&-1===o.indexOf("Chrome")&&(this.$snapContainer=t("body"))}if(this.options=t.extend(!0,{},t.fn.panelSnap.options,e),this.bind(),!1!==this.options.$menu&&t(".active",this.options.$menu).length>0)t(".active",this.options.$menu).click();else{var s=this.getPanel(":first");this.activatePanel(s)}return this},bind:function(){this.bindProxied(this.$eventContainer,"scrollstop",this.scrollStop),this.bindProxied(this.$eventContainer,"mousewheel",this.mouseWheel),this.bindProxied(this.$eventContainer,"mousedown",this.mouseDown),this.bindProxied(this.$eventContainer,"mouseup",this.mouseUp),this.bindProxied(t(e),"resizestop",this.resize),this.options.$menu&&this.bindProxied(this.options.$menu,"click",this.captureMenuClick,this.options.menuSelector),(this.options.navigation.keys.nextKey||this.options.navigation.keys.prevKey)&&this.bindProxied(t(e),"keydown",this.keyDown),this.options.navigation.buttons.$nextButton&&this.bindProxied(this.options.navigation.buttons.$nextButton,"click",this.captureNextClick),this.options.navigation.buttons.$prevButton&&this.bindProxied(this.options.navigation.buttons.$prevButton,"click",this.capturePrevClick)},bindProxied:function(e,n,i,o){var s=this;n+=s.options.namespace,o="string"==typeof o?o:null,e.on(n,o,t.proxy(function(t){return i.call(s,t)},s))},destroy:function(){this.$eventContainer.off(this.options.namespace),t(e).off(this.options.namespace),!1!==this.options.$menu&&t(this.options.menuSelector,this.options.$menu).off(this.options.namespace),this.$container.removeData("plugin_panelSnap")},scrollStop:function(t){var e=void 0;if(t.stopPropagation(),!this.isMouseDown&&!this.isSnapping){var n=this.getPanelsInViewport();if(!this.enabled||n.length<2)(e=n.eq(0)).is(this.getPanel(".active"))||this.activatePanel(e);else{var i=this.$snapContainer.scrollTop(),o=i-this.scrollOffset,s=Math.abs(o)>this.options.directionThreshold,a=void 0;if(o>0)a=s?1:0;else{if(!(o<0))return;a=s?0:1}e=n.eq(a);var r=this.$container[0].scrollHeight-this.scrollInterval;i<=0||i>=r?(this.activatePanel(e),this.scrollOffset=i<=0?0:r):this.snapToPanel(e)}}},getPanelsInViewport:function(){var e=this,n={top:e.$snapContainer.scrollTop()};return n.bottom=n.top+e.$snapContainer.height(),e.getPanel().filter(function(i,o){var s=t(o),a=void 0;return e.$container.is("body")?a=s.offset():(a=s.position()).top+=e.$snapContainer.scrollTop(),a.bottom=a.top+s.outerHeight(),!(n.bottom<a.top||n.top>a.bottom)})},mouseWheel:function(){this.isSnapping&&(this.scrollOffset=this.$snapContainer.scrollTop(),this.$snapContainer.stop(!0),this.isSnapping=!1)},mouseDown:function(){this.isMouseDown=!0},mouseUp:function(t){this.isMouseDown=!1,this.scrollOffset!==this.$snapContainer.scrollTop()&&this.scrollStop(t)},keyDown:function(t){var e=this.options.navigation;if(this.enabled){switch(t.which){case e.keys.prevKey:case e.keys.nextKey:t.preventDefault()}if(!this.isSnapping)switch(t.which){case e.keys.prevKey:this.snapTo("prev",e.wrapAround);break;case e.keys.nextKey:this.snapTo("next",e.wrapAround)}}},captureNextClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("next",this.options.navigation.wrapAround)},capturePrevClick:function(t){t.preventDefault(),this.isSnapping||this.snapTo("prev",this.options.navigation.wrapAround)},resize:function(){if(this.enabled){var t=this.getPanel(".active");this.snapToPanel(t)}},captureMenuClick:function(e){var n=t(e.currentTarget).data("panel"),i=this.getPanel('[data-panel="'+n+'"]');return this.snapToPanel(i),!1},snapToPanel:function(t){var e=this;if(t.jquery){e.isSnapping=!0,e.options.onSnapStart.call(e,t),e.$container.trigger("panelsnap:start",[t]);var n=0;n=e.$container.is("body")?t.offset().top:e.$snapContainer.scrollTop()+t.position().top,n-=e.options.offset;var i=e.scrollOffset>n,o=t.outerHeight()>e.$snapContainer.outerHeight();i&&o&&(n+=t.outerHeight(),n-=e.$snapContainer.outerHeight()),e.$snapContainer.stop(!0).delay(e.options.delay).animate({scrollTop:n},e.options.slideSpeed,e.options.easing,function(){e.scrollOffset=e.$snapContainer.scrollTop(),e.isSnapping=!1,e.options.onSnapFinish.call(e,t),e.$container.trigger("panelsnap:finish",[t]),e.activatePanel(t)})}},activatePanel:function(e){if(this.getPanel(".active").removeClass("active"),e.addClass("active"),!1!==this.options.$menu){var n=this.options.menuSelector+".active";t(n,this.options.$menu).removeClass("active");var i='[data-panel="'+e.data("panel")+'"]',o=this.options.menuSelector+i;t(o,this.options.$menu).addClass("active")}var s=this.options.navigation;if(!s.wrapAround){var a=this.getPanel(),r=a.index(this.getPanel(".active"));!1!==s.buttons.$nextButton&&((e=a.eq(r+1)).length<1?(t(s.buttons.$nextButton).attr("aria-disabled","true"),t(s.buttons.$nextButton).addClass("disabled")):(t(s.buttons.$nextButton).attr("aria-disabled","false"),t(s.buttons.$nextButton).removeClass("disabled"))),!1!==s.buttons.$prevButton&&(r<1?(t(s.buttons.$prevButton).attr("aria-disabled","true"),t(s.buttons.$prevButton).addClass("disabled")):(t(s.buttons.$prevButton).attr("aria-disabled","false"),t(s.buttons.$prevButton).removeClass("disabled")))}this.options.onActivate.call(this,e),this.$container.trigger("panelsnap:activate",[e])},getPanel:function(e){return void 0===e&&(e=""),t(this.options.panelSelector+e,this.$container)},snapTo:function(t,e){"boolean"!=typeof e&&(e=!0);var n=this.getPanel(),i=n.index(this.getPanel(".active")),o=void 0;switch(t){case"prev":o=n.eq(i-1),i<1&&!e&&(o=[]);break;case"next":(o=n.eq(i+1)).length<1&&e&&(o=n.filter(":first"));break;case"first":o=n.filter(":first");break;case"last":o=n.filter(":last")}o.length>0&&this.snapToPanel(o)},enable:function(){this.scrollOffset=this.$snapContainer.scrollTop(),this.enabled=!0},disable:function(){this.enabled=!1},toggle:function(){this.enabled?this.disable():this.enable()}};t.fn.panelSnap=function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return this.each(function(){var n=t.data(this,"plugin_panelSnap");if("object"!==(void 0===e?"undefined":_typeof(e))&&"init"!==e&&e)if(n)if(n[e]){var s,a=e;e=o.slice(1),(s=n)[a].apply(s,_toConsumableArray(e))}else t.error("Method "+e+" does not exist on jQuery.panelSnap.");else t.error("Plugin is not initialized for this object yet.");else n?t.error("Plugin is already initialized for this object."):("init"===e&&(e=o[1]||{}),n=Object.create(i).init(e,this),t.data(this,"plugin_panelSnap",n))})},t.fn.panelSnap.options={$menu:!1,menuSelector:"a",panelSelector:"> section",namespace:".panelSnap",onSnapStart:function(){},onSnapFinish:function(){},onActivate:function(){},directionThreshold:50,slideSpeed:200,delay:0,easing:"linear",offset:0,navigation:{keys:{nextKey:!1,prevKey:!1},buttons:{$nextButton:!1,$prevButton:!1},wrapAround:!1}}}(jQuery,window,document),function(t){t.event.special.scrollstart={enabled:!0,setup:function(){var e=t(this),n=void 0,i=void 0;function o(t,n){t.type=n?"scrollstart":"scrollstop",e.trigger(t)}e.data("scrollwatch",!0),e.on("touchstart",function(){i=!0}),e.on("touchleave touchcancel touchend",function(){i=!1,setTimeout(function(){clearTimeout(n)},50)}),e.on("touchmove scroll",function(e){i||t.event.special.scrollstart.enabled&&(t.event.special.scrollstart.scrolling||(t.event.special.scrollstart.scrolling=!0,o(e,!0)),clearTimeout(n),n=setTimeout(function(){t.event.special.scrollstart.scrolling=!1,o(e,!1)},50))})}},t.event.special.scrollstop={setup:function(){t(this).data("scrollwatch")||t(this).on("scrollstart",function(){})}}}(jQuery),function(t){t.event.special.resizestart={enabled:!0,setup:function(){var e=t(this),n=void 0;function i(t,n){t.type=n?"resizestart":"resizestop",e.trigger(t)}e.data("resizewatch",!0),e.on("resize",function(e){t.event.special.resizestart.enabled&&(t.event.special.resizestart.resizing||(t.event.special.resizestart.resizing=!0,i(e,!0)),clearTimeout(n),n=setTimeout(function(){t.event.special.resizestart.resizing=!1,i(e,!1)},200))})}},t.event.special.resizestop={setup:function(){t(this).data("resizewatch")||t(this).on("resizestart",function(){})}}}(jQuery),function(t){var e=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=e.length;n;)t.event.fixHooks[e[--n]]=t.event.mouseHooks;function i(e){var n=e||window.event,i=[].slice.call(arguments,1),o=0,s=0,a=0;return(e=t.event.fix(n)).type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),a=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,s=-1*o),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(e,o,s,a),(t.event.dispatch||t.event.handle).apply(this,i)}t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=e.length;t;)this.addEventListener(e[--t],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var t=e.length;t;)this.removeEventListener(e[--t],i,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery);
